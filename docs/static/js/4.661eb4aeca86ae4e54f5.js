webpackJsonp([4,12],{"0NI8":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("Xxa5"),a=n.n(r),o=n("exGp"),i=n.n(o),s=n("fwsB"),c=n("FeOV");function u(t){return t/1e4}function d(t){return u(t)/100}function m(t){return d(t)/100}function f(t){return m(t)/100}var l=n("nJ4+"),p=n("6jyd"),v=n("8j+c"),h=n("dKil"),k=n("CGx2");function _(t){var e="";return[{name:"TB",method:f},{name:"GB",method:m},{name:"MB",method:d},{name:"KB",method:u}].forEach(function(n,r){var a=Math.floor(n.method(t));e+=(a=0===r?a:a%100)+" "+n.name+", "}),e.substr(0,e.length-2)}var g=n("MhDk"),b=n("6U0b"),x=b.default.prototype.COUNT_DOCS,y={components:{AttrTag:g.default,AttrInput:v.default,AttrRadio:k.default,AttrCount:h.default,AttrAction:p.default,AttrReverse:c.default,AttrResult:l.default,AttrIndicators:s.default},data:function(){return{main:{owner_id:"",count:{min:"1",max:"20"},type:{value:0,html:[{name:"vk.docs.main_config.type.items[0]",val:0},{name:"vk.docs.main_config.type.items[1]",val:1},{name:"vk.docs.main_config.type.items[2]",val:2},{name:"vk.docs.main_config.type.items[3]",val:3},{name:"vk.docs.main_config.type.items[4]",val:4},{name:"vk.docs.main_config.type.items[5]",val:5},{name:"vk.docs.main_config.type.items[6]",val:6},{name:"vk.docs.main_config.type.items[7]",val:7},{name:"vk.docs.main_config.type.items[8]",val:8}]}},config:{fromIds:{name:"vk.docs.additional_config.from_ids.name",input:"",items:[],compareAll:!1},exts:{name:"vk.docs.additional_config.exts.name",input:"",items:[],compareAll:!1},texts:{name:"vk.docs.additional_config.texts.name",input:"",items:[],compareAll:!1},indicators:{name:"vk.docs.additional_config.indicators.name",items:[{name:"vk.docs.additional_config.indicators.items[0]",info:_,icon:"server",state:0,count:0}],compareAll:!1},reverse:!1},result:[],loading:!1}},computed:{user:function(){return this.$store.state.media.vk.user},process:function(){return this.$store.state.media.vk.process},cancel:function(){return this.$store.state.media.vk.cancel},ownerId:function(){return this.main.owner_id?"-"+this.main.owner_id:this.user.id}},methods:{fetchGet:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b.default.prototype.COUNT_DOCS,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.main.count.min-1;return i()(a.a.mark(function r(){var o;return a.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,b.default.fetchDocsGet(e,n,t.main.type.value,t.ownerId,500,1500);case 2:return o=r.sent,r.abrupt("return",o);case 4:case"end":return r.stop()}},r,t)}))()},fetchDelete:function(t){var e=this;return i()(a.a.mark(function n(){var r;return a.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,b.default.fetchDocsDelete(t,e.ownerId,1500,2500);case 2:return r=n.sent,n.abrupt("return",r);case 4:case"end":return n.stop()}},n,e)}))()},doStart:function(){var t=this;return i()(a.a.mark(function e(){var n,r,o,i,s,c,u;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.start()){e.next=2;break}return e.abrupt("return",t.stop());case 2:n=t.getCountLoop(t.main.count,x),r=0;case 4:if(!(r<n)){e.next=32;break}return e.next=7,t.fetchGet(t.getMaxCountItems(t.main.count,x));case 7:if(!(o=e.sent).ok||!o.body.response){e.next=28;break}i=o.body.response.items.length,s=0;case 11:if(!(s<i)){e.next=26;break}if(!t.cancel){e.next=14;break}return e.abrupt("return",t.stop());case 14:if(c=o.body.response.items[s],!t.check(c)){e.next=22;break}return e.next=18,t.fetchDelete(c.id);case 18:(u=e.sent).ok&&u.body.response&&t.main.count.max--,e.next=23;break;case 22:t.main.count.min++;case 23:s++,e.next=11;break;case 26:e.next=29;break;case 28:return e.abrupt("return",t.stop());case 29:r++,e.next=4;break;case 32:t.stop();case 33:case"end":return e.stop()}},e,t)}))()},doPreview:function(){var t=this;return i()(a.a.mark(function e(){var n,r,o,i,s;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.start()){e.next=2;break}return e.abrupt("return");case 2:n=t.getCountLoop(t.main.count,x),r=0;case 4:if(!(r<n)){e.next=20;break}if(!t.cancel){e.next=7;break}return e.abrupt("return",t.stop());case 7:return o=r*x,i=t.main.count.max-o,e.next=11,t.fetchGet(i>x?x:i,o);case 11:if(!((s=e.sent).ok&&s.body.response&&s.body.response.items.length)){e.next=16;break}s.body.response.items.forEach(function(e){return t.check(e)}),e.next=17;break;case 16:return e.abrupt("return",t.stop());case 17:r++,e.next=4;break;case 20:t.stop();case 21:case"end":return e.stop()}},e,t)}))()},start:function(){return this.$store.commit("START_PROCESS","vk"),this.loading=!0,this.result=[],this.checkStart(this.main.count)},stop:function(){this.$store.commit("STOP_PROCESS","vk"),this.$store.commit("CLEAR_CANCEL","vk"),this.loading=!1},check:function(t){var e=[{obj:this.config.fromIds,method:this.checkNumber,param:t.owner_id},{obj:this.config.exts,method:this.checkTextFull,param:t.ext},{obj:this.config.texts,method:this.checkText,param:t.title},{obj:this.config.indicators,method:this.checkIndicators,param:[t.size]}],n=this.checkFinal(e,this.config.reverse),r=t.title+" ["+Math.floor(d(t.size))+" MB]";return this.pushResult(this.result,r,b.default.getLinkDoc(t.id,this.ownerId),e,n),n.result},getLinkPage:function(t){return b.default.getLinkPage(t)}}},w={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"docs"}},[n("div",{staticClass:"main-config block"},[n("h2",[t._v(t._s(t.$t("vk.docs.main_config.h2")))]),t._v(" "),n("attr-input",{attrs:{name:"vk.docs.main_config.owner_id.name",info:"vk.docs.main_config.owner_id.info",model:t.main.owner_id,process:t.process},on:{"update:model":function(e){t.$set(t.main,"owner_id",e)}}}),t._v(" "),n("attr-count",{attrs:{name:"vk.docs.main_config.count.name",model:t.main.count,process:t.process}}),t._v(" "),n("attr-radio",{attrs:{name:"vk.docs.main_config.type.name",model:t.main.type.value,html:t.main.type.html,process:t.process},on:{"update:model":function(e){t.$set(t.main.type,"value",e)}}})],1),t._v(" "),n("div",{staticClass:"additional-config block"},[n("h2",[t._v(t._s(t.$t("vk.docs.additional_config.h2")))]),t._v(" "),n("attr-tag",{attrs:{obj:t.config.fromIds,push:t.pushNumber,"link-tag":t.getLinkPage,process:t.process,info:"vk.docs.additional_config.from_ids.info"}}),t._v(" "),n("attr-tag",{attrs:{obj:t.config.exts,push:t.pushString,process:t.process,info:"vk.docs.additional_config.exts.info"}}),t._v(" "),n("attr-tag",{attrs:{obj:t.config.texts,push:t.pushString,process:t.process,compare:"",info:"vk.docs.additional_config.texts.info"}}),t._v(" "),n("attr-indicators",{attrs:{obj:t.config.indicators,process:t.process,compare:""}}),t._v(" "),n("attr-reverse",{attrs:{model:t.config.reverse,process:t.process},on:{"update:model":function(e){t.$set(t.config,"reverse",e)}}})],1),t._v(" "),n("attr-action",{attrs:{process:t.process,loading:t.loading,canPreview:""},on:{start:t.doStart,preview:t.doPreview}}),t._v(" "),n("attr-result",{attrs:{data:t.result}})],1)},staticRenderFns:[]},C=n("VU/8")(y,w,!1,null,null,null);e.default=C.exports},CGx2:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r={props:{name:{type:String,required:!0},model:{type:Number|String,required:!0},html:{type:Array,required:!0},info:{type:String,required:!1},process:{type:Boolean,required:!1}},data:function(){return{input:this.model}},watch:{input:function(){this.$emit("update:model",this.input)}}},a={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"block__attr"},[n("p",[t._v(t._s(t.$t(t.name)))]),t._v(" "),n("at-radio-group",{model:{value:t.input,callback:function(e){t.input=e},expression:"input"}},t._l(t.html,function(e){return n("at-radio",{key:e.val,attrs:{label:e.val,disabled:t.process}},[t._v("\n      "+t._s(t.$t(e.name))+"\n    ")])}))],1)},staticRenderFns:[]},o=n("VU/8")(r,a,!1,null,null,null);e.default=o.exports}});
//# sourceMappingURL=4.661eb4aeca86ae4e54f5.js.map