webpackJsonp([4,12],{"0NI8":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("Xxa5"),a=n.n(r),s=n("exGp"),o=n.n(s),i=n("fwsB"),c=n("FeOV"),u=n("nJ4+"),l=n("6jyd"),p=n("8j+c"),d=n("dKil"),m=n("CGx2"),f=n("MhDk"),h=n("6U0b"),v=h.default.prototype.COUNT_DOCS,b={components:{AttrTag:f.default,AttrInput:p.default,AttrRadio:m.default,AttrCount:d.default,AttrAction:l.default,AttrReverse:c.default,AttrResult:u.default,AttrIndicators:i.default},data:function(){return{main:{owner_id:"",count:{min:"1",max:"20"},type:{value:0,html:[{name:"Все",val:0},{name:"Текстовые документы",val:1},{name:"Архивы",val:2},{name:"Gif",val:3},{name:"Изображения",val:4},{name:"Аудио",val:5},{name:"Видео",val:6},{name:"Электронные книги",val:7},{name:"Неизвестно",val:8}]}},config:{fromIds:{name:"ID авторов",input:"",items:[],compareAll:!1},exts:{name:"Расширения документов",input:"",items:[],compareAll:!1},texts:{name:"Фразы в названии",input:"",items:[],compareAll:!1},indicators:{name:"Показатели",items:[{name:"Размер файла",icon:"server",state:0,count:0}],compareAll:!1},reverse:!1},result:[],loading:!1}},computed:{user:function(){return this.$store.state.media.vk.user},process:function(){return this.$store.state.media.vk.process},cancel:function(){return this.$store.state.media.vk.cancel},ownerId:function(){return this.main.owner_id?"-"+this.main.owner_id:this.user.id}},methods:{fetchGet:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h.default.prototype.COUNT_DOCS,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.main.count.min-1;return o()(a.a.mark(function r(){var s;return a.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,h.default.fetchDocsGet(t,n,e.main.type.value,e.ownerId,500,1500);case 2:return s=r.sent,r.abrupt("return",s);case 4:case"end":return r.stop()}},r,e)}))()},fetchDelete:function(e){var t=this;return o()(a.a.mark(function n(){var r;return a.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,h.default.fetchDocsDelete(e,t.ownerId,1500,2500);case 2:return r=n.sent,n.abrupt("return",r);case 4:case"end":return n.stop()}},n,t)}))()},doStart:function(){var e=this;return o()(a.a.mark(function t(){var n,r,s,o,i,c,u;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e.start()){t.next=2;break}return t.abrupt("return",e.stop());case 2:n=e.getCountLoop(e.main.count,v),r=0;case 4:if(!(r<n)){t.next=32;break}return t.next=7,e.fetchGet(e.getMaxCountItems(e.main.count,v));case 7:if(!(s=t.sent).ok||!s.body.response){t.next=28;break}o=s.body.response.items.length,i=0;case 11:if(!(i<o)){t.next=26;break}if(!e.cancel){t.next=14;break}return t.abrupt("return",e.stop());case 14:if(c=s.body.response.items[i],!e.check(c)){t.next=22;break}return t.next=18,e.fetchDelete(c.id);case 18:(u=t.sent).ok&&u.body.response&&e.main.count.max--,t.next=23;break;case 22:e.main.count.min++;case 23:i++,t.next=11;break;case 26:t.next=29;break;case 28:return t.abrupt("return",e.stop());case 29:r++,t.next=4;break;case 32:e.stop();case 33:case"end":return t.stop()}},t,e)}))()},doPreview:function(){var e=this;return o()(a.a.mark(function t(){var n,r,s,o,i;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e.start()){t.next=2;break}return t.abrupt("return");case 2:n=e.getCountLoop(e.main.count,v),r=0;case 4:if(!(r<n)){t.next=20;break}if(!e.cancel){t.next=7;break}return t.abrupt("return",e.stop());case 7:return s=r*v,o=e.main.count.max-s,t.next=11,e.fetchGet(o>v?v:o,s);case 11:if(!((i=t.sent).ok&&i.body.response&&i.body.response.items.length)){t.next=16;break}i.body.response.items.forEach(function(t){return e.check(t)}),t.next=17;break;case 16:return t.abrupt("return",e.stop());case 17:r++,t.next=4;break;case 20:e.stop();case 21:case"end":return t.stop()}},t,e)}))()},start:function(){return this.$store.commit("START_PROCESS","vk"),this.loading=!0,this.result=[],this.checkStart(this.main.count)},stop:function(){this.$store.commit("STOP_PROCESS","vk"),this.$store.commit("CLEAR_CANCEL","vk"),this.loading=!1},check:function(e){var t=[{obj:this.config.fromIds,method:this.checkNumber,param:e.owner_id},{obj:this.config.exts,method:this.checkTextFull,param:e.ext},{obj:this.config.texts,method:this.checkText,param:e.title},{obj:this.config.indicators,method:this.checkIndicators,param:[e.size]}],n=this.checkFinal(t,this.config.reverse);return this.result.push({name:e.title+" ["+e.size+"]",link:h.default.getLinkDoc(e.id,this.ownerId),reason:n.index?t[n.index].obj.name:null,result:n.result?"Yes":"No"}),n.result},getLinkPage:function(e){return h.default.getLinkPage(e)}}},k={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"docs"}},[n("div",{staticClass:"main-config block"},[n("h2",[e._v("Основные настройки")]),e._v(" "),n("attr-input",{attrs:{name:"ID сообщества",info:"Positive number. Empty - Current User.",model:e.main.owner_id,process:e.process},on:{"update:model":function(t){e.$set(e.main,"owner_id",t)}}}),e._v(" "),n("attr-count",{attrs:{name:"Количество документов (от и до), включительно",model:e.main.count,process:e.process}}),e._v(" "),n("attr-radio",{attrs:{name:"Фильтр",model:e.main.type.value,html:e.main.type.html,process:e.process},on:{"update:model":function(t){e.$set(e.main.type,"value",t)}}})],1),e._v(" "),n("div",{staticClass:"docs-config block"},[n("h2",[e._v("Настройки")]),e._v(" "),n("attr-tag",{attrs:{obj:e.config.fromIds,push:e.pushNumber,"link-tag":e.getLinkPage,process:e.process,info:"Press enter to add to the list. Use a negative value to designate a community ID."}}),e._v(" "),n("attr-tag",{attrs:{obj:e.config.exts,push:e.pushString,process:e.process,info:"After filling, press enter to add to the list. Without a dot. Example: png, jpg"}}),e._v(" "),n("attr-tag",{attrs:{obj:e.config.texts,push:e.pushString,process:e.process,compare:"",info:"After filling, press enter to add to the list."}}),e._v(" "),n("attr-indicators",{attrs:{obj:e.config.indicators,process:e.process,compare:""}}),e._v(" "),n("attr-reverse",{attrs:{model:e.config.reverse,process:e.process},on:{"update:model":function(t){e.$set(e.config,"reverse",t)}}})],1),e._v(" "),n("attr-action",{attrs:{process:e.process,loading:e.loading,canPreview:""},on:{start:e.doStart,preview:e.doPreview}}),e._v(" "),n("attr-result",{attrs:{data:e.result}})],1)},staticRenderFns:[]},g=n("VU/8")(b,k,!1,null,null,null);t.default=g.exports},CGx2:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={props:{name:{type:String,required:!0},model:{type:Number|String,required:!0},html:{type:Array,required:!0},info:{type:String,required:!1},process:{type:Boolean,required:!1}},data:function(){return{input:this.model}},watch:{input:function(){this.$emit("update:model",this.input)}}},a={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"block__attr"},[n("p",[e._v(e._s(e.name))]),e._v(" "),n("at-radio-group",{model:{value:e.input,callback:function(t){e.input=t},expression:"input"}},e._l(e.html,function(t){return n("at-radio",{key:t.val,attrs:{label:t.val,disabled:e.process}},[e._v("\n      "+e._s(t.name)+"\n    ")])}))],1)},staticRenderFns:[]},s=n("VU/8")(r,a,!1,null,null,null);t.default=s.exports}});
//# sourceMappingURL=4.a76a6687148afefa85b1.js.map