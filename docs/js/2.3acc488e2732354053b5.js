webpackJsonp([2],{117:function(e,t,o){"use strict";var n=o(41),s=o(28);t.a={components:{QOptionGroup:s.o,QBtn:s.b,Toast:s.x,QInput:s.g,QAlert:s.a},data:function(){return{token:"",scope:[],seePlaceWriteToken:!1}},computed:{haveToken:function(){return!!this.$store.state.vk.token}},methods:{fetchGetPermissions:function(){var e=this;if(!this.token)return s.x.create.negative({html:"The token is empty"});Object(n.b)("account.getAppPermissions",{access_token:this.token}).then(function(t){t.body.response?(e.$store.dispatch("setPermissions",t.body.response),e.$store.dispatch("setToken",e.token),e.fetchGetUser(),s.x.create.positive({html:"Token installed"}),e.token="",e.scope=[]):s.x.create.negative({html:t.body.error?t.body.error.error_msg:"Token error"})})},fetchGetUser:function(){var e=this;Object(n.b)("users.get",{fields:"has_photo,photo_100,counters",access_token:this.token}).then(function(t){t.body.response?e.$store.dispatch("setUser",t.body.response[0]):s.x.create.negative({html:"User not received"})})},linkGetToken:function(){this.seePlaceWriteToken=!0,window.open(n.c+"?client_id="+n.a+"&display=page&redirect_uri=https://oauth.vk.com/blank.html&scope="+this.scope.join(",")+"&response_type=token&v="+n.d,"_blank")}}}},118:function(e,t,o){"use strict";var n=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{attrs:{id:"token"}},[e.haveToken?[o("q-alert",{staticStyle:{"margin-bottom":"1.5rem"},attrs:{color:"warning"}},[e._v("\n      The token is not stored in the browser, so do not close / reload the page unless you want to lose the token.\n    ")]),e._v(" "),o("q-btn",{attrs:{color:"red"},nativeOn:{click:function(t){e.exit()}}},[e._v("Exit")])]:[o("h5",[e._v("Getting a token")]),e._v(" "),o("p",{staticClass:"caption"},[e._v("To run most API methods you need to pass an access_token, a special access key.\n      Token is a string of digits and latin characters and may refer to a user, community or application itself.")]),e._v(" "),o("q-option-group",{staticStyle:{"margin-bottom":"0.5rem"},attrs:{type:"toggle",color:"primary",options:[{label:"Friends",value:"friends"},{label:"Photos",value:"photos"},{label:"Video",value:"video"},{label:"Status",value:"status"},{label:"Messages",value:"messages"},{label:"Wall",value:"wall"},{label:"Docs",value:"docs"},{label:"Groups",value:"groups"}]},model:{value:e.scope,callback:function(t){e.scope=t},expression:"scope"}}),e._v(" "),e.seePlaceWriteToken?e._e():o("q-btn",{staticStyle:{"margin-bottom":"0.5rem"},attrs:{color:"black",outline:""},nativeOn:{click:function(t){e.seePlaceWriteToken=!0}}},[e._v("\n      I have a token\n    ")]),e._v(" "),this.scope.length>0?o("q-btn",{staticStyle:{"margin-bottom":"0.5rem"},attrs:{"icon-right":"send",color:"primary",outline:""},nativeOn:{click:function(t){e.linkGetToken()}}},[e._v("\n      Get a token\n    ")]):e._e(),e._v(" "),e.seePlaceWriteToken?o("q-input",{attrs:{clearable:"",type:"password",color:"red","stack-label":"Token insert here",after:[{icon:"done",handler:function(){e.fetchGetPermissions()}}]},model:{value:e.token,callback:function(t){e.token=t},expression:"token"}}):e._e()]],2)},s=[],a={render:n,staticRenderFns:s};t.a=a},99:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=o(117),s=o(118),a=o(40),r=a(n.a,s.a,!1,null,null,null);t.default=r.exports}});